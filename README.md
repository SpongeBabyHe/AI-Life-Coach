# AI Life Coach

ä¸€ä¸ªAIå¢å¼ºçš„æ™ºèƒ½ç”Ÿæ´»åŠ©æ‰‹åº”ç”¨ï¼Œæ”¯æŒå¤šæ¨¡æ€å†…å®¹è¾“å…¥ï¼ˆæ–‡æœ¬ã€å›¾ç‰‡ã€è¯­éŸ³ï¼‰ï¼Œè‡ªåŠ¨åˆ†ç±»ä¸ºå¾…åŠ/æƒ³æ³•/å¿ƒæƒ…ï¼Œå¹¶æä¾›æ™ºèƒ½åˆ†æå’Œæ•°æ®æŒä¹…åŒ–ã€‚

## âœ¨ æ ¸å¿ƒåŠŸèƒ½

### å¤šæ¨¡æ€å†…å®¹è¾“å…¥
- **æ–‡æœ¬è¾“å…¥**ï¼šç›´æ¥è¾“å…¥æ–‡æœ¬å†…å®¹
- **å›¾ç‰‡è¾“å…¥**ï¼šæ”¯æŒæœ€å¤š5å¼ å›¾ç‰‡ï¼Œè‡ªåŠ¨OCRè¯†åˆ«æ–‡å­—
- **è¯­éŸ³è¾“å…¥**ï¼šæ”¯æŒæœ€å¤š3ä¸ªéŸ³é¢‘æ–‡ä»¶æˆ–å®æ—¶å½•éŸ³ï¼Œè‡ªåŠ¨è½¬æ–‡å­—
- **æ··åˆè¾“å…¥**ï¼šæ”¯æŒæ–‡æœ¬+å›¾ç‰‡+è¯­éŸ³ä»»æ„ç»„åˆ

### AIæ™ºèƒ½åˆ†æ
- **å›¾ç‰‡OCR**ï¼šä½¿ç”¨GPT-4o-mini Vision APIè¿›è¡Œå›¾ç‰‡æ–‡å­—è¯†åˆ«å’Œæ‘˜è¦ç”Ÿæˆ
- **è¯­éŸ³è½¬æ–‡å­—**ï¼šä½¿ç”¨GPT-4o-mini-transcribeè¿›è¡Œè¯­éŸ³è½¬å½•
- **å†…å®¹åˆ†ç±»**ï¼šè‡ªåŠ¨åˆ†ç±»ä¸º `todo`ï¼ˆå¾…åŠï¼‰ã€`idea`ï¼ˆæƒ³æ³•ï¼‰ã€`mood`ï¼ˆå¿ƒæƒ…ï¼‰ä¸‰ç§ç±»å‹
- **ç»“æ„åŒ–æå–**ï¼šæå–æ ‡é¢˜ã€æ‘˜è¦ã€å…³é”®è¯ã€æ ‡ç­¾ã€æ—¶é—´ã€åœ°ç‚¹ç­‰ä¿¡æ¯

### æ•°æ®æŒä¹…åŒ–
- **PostgreSQLæ•°æ®åº“**ï¼šç»Ÿä¸€è¡¨è®¾è®¡ï¼Œæ”¯æŒäº‹åŠ¡å¤„ç†
- **æ–‡ä»¶å­˜å‚¨**ï¼šæ”¯æŒCOSå¯¹è±¡å­˜å‚¨ï¼Œè‡ªåŠ¨ä¸Šä¼ å’Œç®¡ç†æ–‡ä»¶
- **é™„ä»¶ç®¡ç†**ï¼šå®Œæ•´è®°å½•æ‰€æœ‰è¾“å…¥æ–‡ä»¶å’ŒAIå¤„ç†ç»“æœ

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### å‰ç«¯
- **React 18** - ç”¨æˆ·ç•Œé¢æ¡†æ¶
- **Axios** - HTTPå®¢æˆ·ç«¯
- **MediaRecorder API** - è¯­éŸ³å½•åˆ¶
- **File API** - æ–‡ä»¶ä¸Šä¼ å’Œé¢„è§ˆ

### åç«¯
- **Node.js + Express** - æœåŠ¡å™¨æ¡†æ¶
- **PostgreSQL** - å…³ç³»å‹æ•°æ®åº“
- **Multer** - æ–‡ä»¶ä¸Šä¼ å¤„ç†
- **COS Node.js SDK** - å¯¹è±¡å­˜å‚¨æœåŠ¡

### AIæœåŠ¡
- **OpenAI GPT-4o-mini** - æ–‡æœ¬åˆ†æå’Œå†…å®¹åˆ†ç±»
- **OpenAI GPT-4o-mini Vision** - å›¾ç‰‡OCRå’Œæ‘˜è¦
- **OpenAI GPT-4o-mini-transcribe** - è¯­éŸ³è½¬æ–‡å­—

## ğŸ“ é¡¹ç›®ç»“æ„

```
lazylog-coach/
â”œâ”€â”€ frontend/              # Reactå‰ç«¯åº”ç”¨
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ App.js         # ä¸»åº”ç”¨ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ apiService.js  # APIè°ƒç”¨å°è£…
â”‚   â”‚   â””â”€â”€ hooks/
â”‚   â”‚       â””â”€â”€ useAudioRecorder.js  # è¯­éŸ³å½•åˆ¶Hook
â”‚   â”œâ”€â”€ public/
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ backend/               # Node.jsåç«¯åº”ç”¨
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ server.js      # ExpressæœåŠ¡å™¨
â”‚   â”‚   â”œâ”€â”€ routes/        # APIè·¯ç”±
â”‚   â”‚   â”‚   â”œâ”€â”€ analyze.js      # å†…å®¹åˆ†ææ¥å£
â”‚   â”‚   â”‚   â”œâ”€â”€ testImage.js    # å›¾ç‰‡æµ‹è¯•æ¥å£
â”‚   â”‚   â”‚   â””â”€â”€ testAudio.js    # éŸ³é¢‘æµ‹è¯•æ¥å£
â”‚   â”‚   â””â”€â”€ services/      # ä¸šåŠ¡æœåŠ¡å±‚
â”‚   â”‚       â”œâ”€â”€ analyzeService.js    # ç»Ÿä¸€å†…å®¹åˆ†ææœåŠ¡
â”‚   â”‚       â”œâ”€â”€ aiService.js          # æ–‡æœ¬AIåˆ†ææœåŠ¡
â”‚   â”‚       â”œâ”€â”€ imageAIService.js    # å›¾ç‰‡OCRæœåŠ¡
â”‚   â”‚       â”œâ”€â”€ audioAIService.js     # è¯­éŸ³è½¬æ–‡å­—æœåŠ¡
â”‚   â”‚       â”œâ”€â”€ dbService.js          # æ•°æ®åº“æ“ä½œæœåŠ¡
â”‚   â”‚       â””â”€â”€ storageService.js     # å¯¹è±¡å­˜å‚¨æœåŠ¡
â”‚   â”œâ”€â”€ scripts/           # æµ‹è¯•è„šæœ¬
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ database/              # æ•°æ®åº“è„šæœ¬
â”‚   â””â”€â”€ migrations/
â”‚       â””â”€â”€ 002_unified_design.sql  # ç»Ÿä¸€è¡¨è®¾è®¡è¿ç§»è„šæœ¬
â”œâ”€â”€ docker-compose.yml     # Dockerç¼–æ’é…ç½®
â””â”€â”€ README.md
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

- Node.js >= 16
- PostgreSQL >= 12
- npm æˆ– yarn

### 1. å…‹éš†é¡¹ç›®

```bash
git clone <repository-url>
cd lazylog-coach
```

### 2. å®‰è£…ä¾èµ–

```bash
# å®‰è£…åç«¯ä¾èµ–
cd backend
npm install

# å®‰è£…å‰ç«¯ä¾èµ–
cd ../frontend
npm install
```

### 3. é…ç½®ç¯å¢ƒå˜é‡

åœ¨ `backend/` ç›®å½•ä¸‹åˆ›å»º `.env` æ–‡ä»¶ï¼š

```env
# æœåŠ¡å™¨é…ç½®
PORT=5001

# æ•°æ®åº“é…ç½®
DB_HOST=localhost
DB_PORT=5432
DB_NAME=lazylog_coach
DB_USER=your_user
DB_PASSWORD=your_password

# OpenAIé…ç½®
OPENAI_API_KEY=your_openai_api_key
OPENAI_API_URL=https://api.openai.com/v1
OPENAI_MODEL=gpt-4o-mini-2024-07-18
OPENAI_MODEL_AUDIO=gpt-4o-mini-transcribe-2025-03-20

# COSé…ç½®ï¼ˆå¯é€‰ï¼‰
COS_SECRET_ID=your_secret_id
COS_SECRET_KEY=your_secret_key
COS_REGION=your_region
COS_BUCKET=your_bucket
```

åœ¨ `frontend/` ç›®å½•ä¸‹åˆ›å»º `.env` æ–‡ä»¶ï¼š

```env
REACT_APP_API_URL=http://localhost:5001
```

### 4. åˆå§‹åŒ–æ•°æ®åº“

```bash
# åˆ›å»ºæ•°æ®åº“
createdb lazylog_coach

# è¿è¡Œè¿ç§»è„šæœ¬
psql lazylog_coach < database/migrations/002_unified_design.sql
```

### 5. å¯åŠ¨æœåŠ¡

```bash
# å¯åŠ¨åç«¯æœåŠ¡ï¼ˆåœ¨backendç›®å½•ï¼‰
cd backend
npm start

# å¯åŠ¨å‰ç«¯æœåŠ¡ï¼ˆåœ¨frontendç›®å½•ï¼Œæ–°ç»ˆç«¯ï¼‰
cd frontend
npm start
```

å‰ç«¯é»˜è®¤è¿è¡Œåœ¨ `http://localhost:3000`ï¼Œåç«¯APIè¿è¡Œåœ¨ `http://localhost:5001`ã€‚

### ä½¿ç”¨Dockerï¼ˆå¯é€‰ï¼‰

```bash
docker-compose up -d
```

## ğŸ“Š æ•°æ®åº“è®¾è®¡

### entries è¡¨
å­˜å‚¨æ‰€æœ‰ç±»å‹çš„å†…å®¹ï¼ˆtodo/idea/moodï¼‰ï¼Œé€šè¿‡ `type` å­—æ®µåŒºåˆ†ã€‚

**ä¸»è¦å­—æ®µï¼š**
- `type`: å†…å®¹ç±»å‹ï¼ˆtodo/idea/moodï¼‰
- `title`: æå–çš„æ ‡é¢˜/å¾…åŠé¡¹
- `content`: å®Œæ•´å†…å®¹æ–‡æœ¬
- `summary`: AIç”Ÿæˆçš„æ‘˜è¦
- `keywords`: AIæå–çš„å…³é”®è¯
- `tags`: ç”¨æˆ·æ ‡ç­¾
- `status`: å¾…åŠçŠ¶æ€ï¼ˆä»…todoç±»å‹ï¼‰
- `completed`: å®ŒæˆçŠ¶æ€ï¼ˆä»…todoç±»å‹ï¼‰
- `emotion_type`: æƒ…ç»ªç±»å‹ï¼ˆä»…moodç±»å‹ï¼‰
- `intensity`: å¿ƒæƒ…å¼ºåº¦ï¼ˆä»…moodç±»å‹ï¼‰

### entry_attachments è¡¨
å­˜å‚¨æ‰€æœ‰åŸå§‹è¾“å…¥æ–‡ä»¶å’Œå¤„ç†ç»“æœã€‚

**ä¸»è¦å­—æ®µï¼š**
- `input_type`: è¾“å…¥ç±»å‹ï¼ˆtext/audio/imageï¼‰
- `file_url`: æ–‡ä»¶è®¿é—®URL
- `transcribed_text`: è¯­éŸ³è½¬æ–‡å­—ç»“æœ
- `ocr_text`: å›¾ç‰‡OCRç»“æœ
- `raw_text`: åŸå§‹æ–‡æœ¬è¾“å…¥

## ğŸ”Œ APIæ¥å£

### POST /api/analyze
ç»Ÿä¸€å†…å®¹åˆ†ææ¥å£ï¼Œæ”¯æŒæ–‡æœ¬ã€å›¾ç‰‡ã€è¯­éŸ³çš„ä»»æ„ç»„åˆè¾“å…¥ã€‚

**è¯·æ±‚æ ¼å¼ï¼š** `multipart/form-data`

**å‚æ•°ï¼š**
- `text` (å¯é€‰): æ–‡æœ¬å†…å®¹
- `image` (å¯é€‰): å›¾ç‰‡æ–‡ä»¶ï¼Œæœ€å¤š5ä¸ª
- `audio` (å¯é€‰): éŸ³é¢‘æ–‡ä»¶ï¼Œæœ€å¤š3ä¸ª

**å“åº”ç¤ºä¾‹ï¼š**
```json
{
  "success": true,
  "message": "å†…å®¹åˆ†æå®Œæˆ",
  "data": {
    "id": 1,
    "type": "todo",
    "title": "å®Œæˆé¡¹ç›®æ–‡æ¡£",
    "summary": "éœ€è¦å®Œæˆé¡¹ç›®æ–‡æ¡£ç¼–å†™",
    "keywords": ["é¡¹ç›®", "æ–‡æ¡£"],
    "tags": ["å·¥ä½œ"],
    "createdAt": "2024-12-27T10:00:00Z"
  }
}
```

### GET /health
å¥åº·æ£€æŸ¥æ¥å£

### GET /health/db
æ•°æ®åº“è¿æ¥æ£€æŸ¥æ¥å£

## ğŸ¯ åŠŸèƒ½ç‰¹æ€§

- âœ… å¤šæ¨¡æ€è¾“å…¥æ”¯æŒï¼ˆæ–‡æœ¬/å›¾ç‰‡/è¯­éŸ³ï¼‰
- âœ… å®æ—¶è¯­éŸ³å½•åˆ¶ï¼ˆæ”¯æŒæš‚åœ/ç»§ç»­/åœæ­¢ï¼‰
- âœ… å›¾ç‰‡OCRæ–‡å­—è¯†åˆ«
- âœ… è¯­éŸ³è½¬æ–‡å­—
- âœ… AIæ™ºèƒ½åˆ†ç±»å’Œç»“æ„åŒ–æå–
- âœ… æ•°æ®åº“äº‹åŠ¡ä¿è¯æ•°æ®ä¸€è‡´æ€§
- âœ… æ–‡ä»¶è‡ªåŠ¨ä¸Šä¼ åˆ°å¯¹è±¡å­˜å‚¨
- âœ… å¹¶è¡Œå¤„ç†ä¼˜åŒ–ï¼ˆå›¾ç‰‡å’ŒéŸ³é¢‘å¹¶è¡Œå¤„ç†ï¼‰
- âœ… å®Œå–„çš„é”™è¯¯å¤„ç†å’Œæ—¥å¿—è®°å½•

## ğŸ”® æœªæ¥è®¡åˆ’

- [ ] é›†æˆLangChainåˆ°AIæœåŠ¡å±‚
- [ ] å®ç°æµå¼å“åº”ï¼ˆStreamingï¼‰
- [ ] å®ç°ç»“æ„åŒ–è¾“å‡ºä¼˜åŒ–
- [ ] æ·»åŠ ç”¨æˆ·è®¤è¯å’Œæˆæƒ
- [ ] å®ç°æ—¥å†è§†å›¾å’ŒTodoé¢æ¿
- [ ] æ·»åŠ ç›®æ ‡åˆ†è§£åŠŸèƒ½
- [ ] å®ç°ç”¨æˆ·ç”»åƒåˆ†æ
- [ ] æ·»åŠ å®šæœŸå¤ç›˜åŠŸèƒ½
- [ ] å®ç°æ´»åŠ¨æ¨èåŠŸèƒ½

## ğŸ“ è®¸å¯è¯

[æ·»åŠ è®¸å¯è¯ä¿¡æ¯]

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤Issueå’ŒPull Requestï¼